{"version":3,"sources":["main.js"],"names":["canvas","document","getElementById","context","getContext","lineWidth","enabled","imageDataFragment","autoSetCanvasSize","listenToUser","clear","onclick","clearRect","width","height","download","compositeOperation","globalCompositeOperation","fillStyle","fillRect","imageData","toDataURL","putImageData","getImageData","a","createElement","body","appendChild","href","target","click","black","strokeStyle","classList","add","red","remove","green","blue","currentColor","e","value","onchange","range","canvasSize","window","onresize","documentElement","clientWidth","clientHeight","drawLine","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","closePath","drawCircle","x","y","radius","arc","Math","PI","fill","using","lastPoint","undefined","ontouchstart","onmousedown","clientX","clientY","onmousemove","newPoint","onmouseup","touches","ontouchmove","ontouchend","addEventListener","preventDefault","passive"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAd;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,IAAIC,iBAAJ;AAEAC,iBAAiB,CAACR,MAAD,CAAjB;AAEAS,YAAY,CAACT,MAAD,CAAZ;;AAEAU,KAAK,CAACC,OAAN,GAAgB,YAAW;AAACR,EAAAA,OAAO,CAACS,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBZ,MAAM,CAACa,KAA/B,EAAsCb,MAAM,CAACc,MAA7C;AAAsD,CAAlF;;AACAC,QAAQ,CAACJ,OAAT,GAAmB,YAAW;AAC5B,MAAIK,kBAAkB,GAAGb,OAAO,CAACc,wBAAjC;AACAd,EAAAA,OAAO,CAACc,wBAAR,GAAmC,kBAAnC;AACAd,EAAAA,OAAO,CAACe,SAAR,GAAoB,MAApB;AACAf,EAAAA,OAAO,CAACgB,QAAR,CAAiB,CAAjB,EAAoB,CAApB,EAAuBnB,MAAM,CAACa,KAA9B,EAAqCb,MAAM,CAACc,MAA5C;AACA,MAAIM,SAAS,GAAGpB,MAAM,CAACqB,SAAP,CAAiB,WAAjB,CAAhB;AACAlB,EAAAA,OAAO,CAACmB,YAAR,CAAqBnB,OAAO,CAACoB,YAAR,CAAqB,CAArB,EAAwB,CAAxB,EAA2BvB,MAAM,CAACa,KAAlC,EAAyCb,MAAM,CAACc,MAAhD,CAArB,EAA6E,CAA7E,EAA+E,CAA/E;AACAX,EAAAA,OAAO,CAACc,wBAAR,GAAmCD,kBAAnC;AACA,MAAIQ,CAAC,GAAGvB,QAAQ,CAACwB,aAAT,CAAuB,GAAvB,CAAR;AACAxB,EAAAA,QAAQ,CAACyB,IAAT,CAAcC,WAAd,CAA0BH,CAA1B;AACAA,EAAAA,CAAC,CAACI,IAAF,GAASR,SAAT;AACAI,EAAAA,CAAC,CAACT,QAAF,GAAa,SAAb;AACAS,EAAAA,CAAC,CAACK,MAAF,GAAW,QAAX;AACAL,EAAAA,CAAC,CAACM,KAAF;AACD,CAdD;;AAgBAC,KAAK,CAACpB,OAAN,GAAgB,YAAW;AACzBR,EAAAA,OAAO,CAACe,SAAR,GAAoB,OAApB;AACAf,EAAAA,OAAO,CAAC6B,WAAR,GAAsB,OAAtB;AACAD,EAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACAC,EAAAA,GAAG,CAACF,SAAJ,CAAcG,MAAd,CAAqB,QAArB;AACAC,EAAAA,KAAK,CAACJ,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACAE,EAAAA,IAAI,CAACL,SAAL,CAAeG,MAAf,CAAsB,QAAtB;AACD,CAPD;;AAQAD,GAAG,CAACxB,OAAJ,GAAc,YAAW;AACvBR,EAAAA,OAAO,CAACe,SAAR,GAAoB,KAApB;AACAf,EAAAA,OAAO,CAAC6B,WAAR,GAAsB,KAAtB;AACAG,EAAAA,GAAG,CAACF,SAAJ,CAAcC,GAAd,CAAkB,QAAlB;AACAG,EAAAA,KAAK,CAACJ,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACAE,EAAAA,IAAI,CAACL,SAAL,CAAeG,MAAf,CAAsB,QAAtB;AACAL,EAAAA,KAAK,CAACE,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACD,CAPD;;AAQAC,KAAK,CAAC1B,OAAN,GAAgB,YAAW;AACzBR,EAAAA,OAAO,CAACe,SAAR,GAAoB,OAApB;AACAf,EAAAA,OAAO,CAAC6B,WAAR,GAAsB,OAAtB;AACAK,EAAAA,KAAK,CAACJ,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACAC,EAAAA,GAAG,CAACF,SAAJ,CAAcG,MAAd,CAAqB,QAArB;AACAE,EAAAA,IAAI,CAACL,SAAL,CAAeG,MAAf,CAAsB,QAAtB;AACAL,EAAAA,KAAK,CAACE,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACD,CAPD;;AAQAE,IAAI,CAAC3B,OAAL,GAAe,YAAW;AACxBR,EAAAA,OAAO,CAACe,SAAR,GAAoB,MAApB;AACAf,EAAAA,OAAO,CAAC6B,WAAR,GAAsB,MAAtB;AACAM,EAAAA,IAAI,CAACL,SAAL,CAAeC,GAAf,CAAmB,QAAnB;AACAG,EAAAA,KAAK,CAACJ,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACAD,EAAAA,GAAG,CAACF,SAAJ,CAAcG,MAAd,CAAqB,QAArB;AACAL,EAAAA,KAAK,CAACE,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACD,CAPD;;AAQAG,YAAY,CAAC5B,OAAb,GAAuB,UAAS6B,CAAT,EAAY;AACjCrC,EAAAA,OAAO,CAACe,SAAR,GAAoBsB,CAAC,CAACX,MAAF,CAASY,KAA7B;AACAtC,EAAAA,OAAO,CAAC6B,WAAR,GAAsBQ,CAAC,CAACX,MAAF,CAASY,KAA/B;AACAH,EAAAA,IAAI,CAACL,SAAL,CAAeG,MAAf,CAAsB,QAAtB;AACAC,EAAAA,KAAK,CAACJ,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACAD,EAAAA,GAAG,CAACF,SAAJ,CAAcG,MAAd,CAAqB,QAArB;AACAL,EAAAA,KAAK,CAACE,SAAN,CAAgBG,MAAhB,CAAuB,QAAvB;AACD,CAPD;;AAQAG,YAAY,CAACG,QAAb,GAAwB,UAASF,CAAT,EAAY;AAClCrC,EAAAA,OAAO,CAACe,SAAR,GAAoBsB,CAAC,CAACX,MAAF,CAASY,KAA7B;AACAtC,EAAAA,OAAO,CAAC6B,WAAR,GAAsBQ,CAAC,CAACX,MAAF,CAASY,KAA/B;;AACA,UAAQD,CAAC,CAACX,MAAF,CAASY,KAAjB;AACE,SAAK,SAAL;AACEV,MAAAA,KAAK,CAACE,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACA;;AACF,SAAK,SAAL;AACEC,MAAAA,GAAG,CAACF,SAAJ,CAAcC,GAAd,CAAkB,QAAlB;AACA;;AACF,SAAK,SAAL;AACEG,MAAAA,KAAK,CAACJ,SAAN,CAAgBC,GAAhB,CAAoB,QAApB;AACA;;AACF,SAAK,SAAL;AACEI,MAAAA,IAAI,CAACL,SAAL,CAAeC,GAAf,CAAmB,QAAnB;AACA;AAZJ;AAcD,CAjBD;;AAkBAS,KAAK,CAACD,QAAN,GAAiB,UAASF,CAAT,EAAY;AAC3BnC,EAAAA,SAAS,GAAGmC,CAAC,CAACX,MAAF,CAASY,KAAT,GAAiB,CAA7B;AACD,CAFD;;AAIA,SAASjC,iBAAT,CAA2BR,MAA3B,EAAmC;AACjC4C,EAAAA,UAAU;;AACVC,EAAAA,MAAM,CAACC,QAAP,GAAkB,YAAW;AAC3BF,IAAAA,UAAU;AACX,GAFD;AAGD;;AAED,SAASA,UAAT,GAAsB;AACpB5C,EAAAA,MAAM,CAACa,KAAP,GAAeZ,QAAQ,CAAC8C,eAAT,CAAyBC,WAAxC;AACAhD,EAAAA,MAAM,CAACc,MAAP,GAAgBb,QAAQ,CAAC8C,eAAT,CAAyBE,YAAzC;AACD;;AAED,SAASC,QAAT,CAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkC;AAChCnD,EAAAA,OAAO,CAACoD,SAAR;AACApD,EAAAA,OAAO,CAACqD,MAAR,CAAeL,EAAf,EAAmBC,EAAnB;AACAjD,EAAAA,OAAO,CAACE,SAAR,GAAoBA,SAApB;AACAF,EAAAA,OAAO,CAACsD,MAAR,CAAeJ,EAAf,EAAmBC,EAAnB;AACAnD,EAAAA,OAAO,CAACuD,MAAR;AACAvD,EAAAA,OAAO,CAACwD,SAAR;AACD;;AAED,SAASC,UAAT,CAAoBC,CAApB,EAAuBC,CAAvB,EAA0BC,MAA1B,EAAkC;AAChC5D,EAAAA,OAAO,CAACoD,SAAR;AACApD,EAAAA,OAAO,CAAC6D,GAAR,CAAYH,CAAZ,EAAeC,CAAf,EAAkBC,MAAlB,EAA0B,CAA1B,EAA6BE,IAAI,CAACC,EAAL,GAAU,CAAvC;AACA/D,EAAAA,OAAO,CAACgE,IAAR;AACD;;AAED,SAAS1D,YAAT,CAAsBT,MAAtB,EAA8B;AAC5B,MAAIoE,KAAK,GAAG,KAAZ;AACA,MAAIC,SAAS,GAAG;AACdR,IAAAA,CAAC,EAAES,SADW;AAEdR,IAAAA,CAAC,EAAEQ;AAFW,GAAhB,CAF4B,CAM5B;;AACA,MAAIrE,QAAQ,CAACyB,IAAT,CAAc6C,YAAd,KAA+BD,SAAnC,EAA8C;AAC5C;AACAtE,IAAAA,MAAM,CAACwE,WAAP,GAAqB,UAAShD,CAAT,EAAY;AAC/B,UAAIqC,CAAC,GAAGrC,CAAC,CAACiD,OAAV;AACA,UAAIX,CAAC,GAAGtC,CAAC,CAACkD,OAAV;AACAN,MAAAA,KAAK,GAAG,IAAR;;AACA,UAAI9D,OAAJ,EAAa;AACXM,QAAAA,SAAS,CAACiD,CAAD,EAAIC,CAAJ,CAAT;AACD,OAFD,MAEO;AACLO,QAAAA,SAAS,GAAG;AACVR,UAAAA,CAAC,EAAEA,CADO;AAEVC,UAAAA,CAAC,EAAEA;AAFO,SAAZ;AAID;AACF,KAZD;;AAaA9D,IAAAA,MAAM,CAAC2E,WAAP,GAAqB,UAASnD,CAAT,EAAY;AAC/B,UAAIqC,CAAC,GAAGrC,CAAC,CAACiD,OAAV;AACA,UAAIX,CAAC,GAAGtC,CAAC,CAACkD,OAAV;;AACA,UAAI,CAACN,KAAL,EAAY;AACV;AACD;;AACD,UAAI9D,OAAJ,EAAa;AACXM,QAAAA,SAAS,CAACiD,CAAD,EAAIC,CAAJ,CAAT;AACD,OAFD,MAEO;AACL,YAAIc,QAAQ,GAAG;AACbf,UAAAA,CAAC,EAAEA,CADU;AAEbC,UAAAA,CAAC,EAAEA;AAFU,SAAf;AAIAF,QAAAA,UAAU,CAACC,CAAD,EAAIC,CAAJ,EAAOzD,SAAS,GAAG,CAAnB,CAAV;AACA6C,QAAAA,QAAQ,CAACmB,SAAS,CAACR,CAAX,EAAcQ,SAAS,CAACP,CAAxB,EAA2Bc,QAAQ,CAACf,CAApC,EAAuCe,QAAQ,CAACd,CAAhD,CAAR;AACAO,QAAAA,SAAS,GAAGO,QAAZ;AACD;AACF,KAjBD;;AAkBA5E,IAAAA,MAAM,CAAC6E,SAAP,GAAmB,YAAW;AAC5BT,MAAAA,KAAK,GAAG,KAAR;AACD,KAFD;AAGD,GApCD,MAoCO;AACL;AACApE,IAAAA,MAAM,CAACuE,YAAP,GAAsB,UAAS/C,CAAT,EAAY;AAChC,UAAIqC,CAAC,GAAGrC,CAAC,CAACsD,OAAF,CAAU,CAAV,EAAaL,OAArB;AACA,UAAIX,CAAC,GAAGtC,CAAC,CAACsD,OAAF,CAAU,CAAV,EAAaJ,OAArB;AACAN,MAAAA,KAAK,GAAG,IAAR;;AACA,UAAI9D,OAAJ,EAAa;AACXM,QAAAA,SAAS,CAACiD,CAAD,EAAIC,CAAJ,CAAT;AACD,OAFD,MAEO;AACLO,QAAAA,SAAS,GAAG;AACVR,UAAAA,CAAC,EAAEA,CADO;AAEVC,UAAAA,CAAC,EAAEA;AAFO,SAAZ;AAID;AACF,KAZD;;AAaA9D,IAAAA,MAAM,CAAC+E,WAAP,GAAqB,UAASvD,CAAT,EAAY;AAC/B,UAAIqC,CAAC,GAAGrC,CAAC,CAACsD,OAAF,CAAU,CAAV,EAAaL,OAArB;AACA,UAAIX,CAAC,GAAGtC,CAAC,CAACsD,OAAF,CAAU,CAAV,EAAaJ,OAArB;;AACA,UAAI,CAACN,KAAL,EAAY;AACV;AACD;;AACD,UAAI9D,OAAJ,EAAa;AACXM,QAAAA,SAAS,CAACiD,CAAD,EAAIC,CAAJ,CAAT;AACD,OAFD,MAEO;AACL,YAAIc,QAAQ,GAAG;AACbf,UAAAA,CAAC,EAAEA,CADU;AAEbC,UAAAA,CAAC,EAAEA;AAFU,SAAf;AAIAF,QAAAA,UAAU,CAACC,CAAD,EAAIC,CAAJ,EAAOzD,SAAS,GAAG,CAAnB,CAAV;AACA6C,QAAAA,QAAQ,CAACmB,SAAS,CAACR,CAAX,EAAcQ,SAAS,CAACP,CAAxB,EAA2Bc,QAAQ,CAACf,CAApC,EAAuCe,QAAQ,CAACd,CAAhD,CAAR;AACAO,QAAAA,SAAS,GAAGO,QAAZ;AACD;AACF,KAjBD;;AAkBA5E,IAAAA,MAAM,CAACgF,UAAP,GAAoB,YAAW;AAC7BZ,MAAAA,KAAK,GAAG,KAAR;AACD,KAFD;AAGD;AACF;;AACDnE,QAAQ,CAACyB,IAAT,CAAcuD,gBAAd,CACE,WADF,EAEE,UAASzC,CAAT,EAAY;AACVA,EAAAA,CAAC,CAAC0C,cAAF;AACD,CAJH,EAKE;AAAEC,EAAAA,OAAO,EAAE;AAAX,CALF","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["var canvas = document.getElementById(\"canvas\");\r\nvar context = canvas.getContext(\"2d\");\r\nvar lineWidth = 5;\r\nvar enabled = false;\r\nvar imageDataFragment;\r\n\r\nautoSetCanvasSize(canvas);\r\n\r\nlistenToUser(canvas);\r\n\r\nclear.onclick = function() {context.clearRect(0, 0, canvas.width, canvas.height);};\r\ndownload.onclick = function() {\r\n  var compositeOperation = context.globalCompositeOperation;\r\n  context.globalCompositeOperation = \"destination-over\";\r\n  context.fillStyle = \"#fff\";\r\n  context.fillRect(0, 0, canvas.width, canvas.height);\r\n  var imageData = canvas.toDataURL(\"image/png\");\r\n  context.putImageData(context.getImageData(0, 0, canvas.width, canvas.height),0,0);\r\n  context.globalCompositeOperation = compositeOperation;\r\n  var a = document.createElement(\"a\");\r\n  document.body.appendChild(a);\r\n  a.href = imageData;\r\n  a.download = \"myPaint\";\r\n  a.target = \"_blank\";\r\n  a.click();\r\n};\r\n\r\nblack.onclick = function() {\r\n  context.fillStyle = \"black\";\r\n  context.strokeStyle = \"black\";\r\n  black.classList.add(\"active\");\r\n  red.classList.remove(\"active\");\r\n  green.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n};\r\nred.onclick = function() {\r\n  context.fillStyle = \"red\";\r\n  context.strokeStyle = \"red\";\r\n  red.classList.add(\"active\");\r\n  green.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n  black.classList.remove(\"active\");\r\n};\r\ngreen.onclick = function() {\r\n  context.fillStyle = \"green\";\r\n  context.strokeStyle = \"green\";\r\n  green.classList.add(\"active\");\r\n  red.classList.remove(\"active\");\r\n  blue.classList.remove(\"active\");\r\n  black.classList.remove(\"active\");\r\n};\r\nblue.onclick = function() {\r\n  context.fillStyle = \"blue\";\r\n  context.strokeStyle = \"blue\";\r\n  blue.classList.add(\"active\");\r\n  green.classList.remove(\"active\");\r\n  red.classList.remove(\"active\");\r\n  black.classList.remove(\"active\");\r\n};\r\ncurrentColor.onclick = function(e) {\r\n  context.fillStyle = e.target.value;\r\n  context.strokeStyle = e.target.value;\r\n  blue.classList.remove(\"active\");\r\n  green.classList.remove(\"active\");\r\n  red.classList.remove(\"active\");\r\n  black.classList.remove(\"active\");\r\n};\r\ncurrentColor.onchange = function(e) {\r\n  context.fillStyle = e.target.value;\r\n  context.strokeStyle = e.target.value;\r\n  switch (e.target.value) {\r\n    case \"#000000\":\r\n      black.classList.add(\"active\");\r\n      break;\r\n    case \"#ff0000\":\r\n      red.classList.add(\"active\");\r\n      break;\r\n    case \"#008000\":\r\n      green.classList.add(\"active\");\r\n      break;\r\n    case \"#0000ff\":\r\n      blue.classList.add(\"active\");\r\n      break;\r\n  }\r\n};\r\nrange.onchange = function(e) {\r\n  lineWidth = e.target.value * 1;\r\n};\r\n\r\nfunction autoSetCanvasSize(canvas) {\r\n  canvasSize();\r\n  window.onresize = function() {\r\n    canvasSize();\r\n  };\r\n}\r\n\r\nfunction canvasSize() {\r\n  canvas.width = document.documentElement.clientWidth;\r\n  canvas.height = document.documentElement.clientHeight;\r\n}\r\n\r\nfunction drawLine(x1, y1, x2, y2) {\r\n  context.beginPath();\r\n  context.moveTo(x1, y1);\r\n  context.lineWidth = lineWidth;\r\n  context.lineTo(x2, y2);\r\n  context.stroke();\r\n  context.closePath();\r\n}\r\n\r\nfunction drawCircle(x, y, radius) {\r\n  context.beginPath();\r\n  context.arc(x, y, radius, 0, Math.PI * 2);\r\n  context.fill();\r\n}\r\n\r\nfunction listenToUser(canvas) {\r\n  var using = false;\r\n  var lastPoint = {\r\n    x: undefined,\r\n    y: undefined\r\n  };\r\n  //特性检测\r\n  if (document.body.ontouchstart === undefined) {\r\n    //非触屏设备\r\n    canvas.onmousedown = function(a) {\r\n      var x = a.clientX;\r\n      var y = a.clientY;\r\n      using = true;\r\n      if (enabled) {\r\n        clearRect(x, y);\r\n      } else {\r\n        lastPoint = {\r\n          x: x,\r\n          y: y\r\n        };\r\n      }\r\n    };\r\n    canvas.onmousemove = function(a) {\r\n      var x = a.clientX;\r\n      var y = a.clientY;\r\n      if (!using) {\r\n        return;\r\n      }\r\n      if (enabled) {\r\n        clearRect(x, y);\r\n      } else {\r\n        var newPoint = {\r\n          x: x,\r\n          y: y\r\n        };\r\n        drawCircle(x, y, lineWidth / 2);\r\n        drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);\r\n        lastPoint = newPoint;\r\n      }\r\n    };\r\n    canvas.onmouseup = function() {\r\n      using = false;\r\n    };\r\n  } else {\r\n    //触屏设备\r\n    canvas.ontouchstart = function(a) {\r\n      var x = a.touches[0].clientX;\r\n      var y = a.touches[0].clientY;\r\n      using = true;\r\n      if (enabled) {\r\n        clearRect(x, y);\r\n      } else {\r\n        lastPoint = {\r\n          x: x,\r\n          y: y\r\n        };\r\n      }\r\n    };\r\n    canvas.ontouchmove = function(a) {\r\n      var x = a.touches[0].clientX;\r\n      var y = a.touches[0].clientY;\r\n      if (!using) {\r\n        return;\r\n      }\r\n      if (enabled) {\r\n        clearRect(x, y);\r\n      } else {\r\n        var newPoint = {\r\n          x: x,\r\n          y: y\r\n        };\r\n        drawCircle(x, y, lineWidth / 2);\r\n        drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y);\r\n        lastPoint = newPoint;\r\n      }\r\n    };\r\n    canvas.ontouchend = function() {\r\n      using = false;\r\n    };\r\n  }\r\n}\r\ndocument.body.addEventListener(\r\n  \"touchmove\",\r\n  function(e) {\r\n    e.preventDefault();\r\n  },\r\n  { passive: false }\r\n);"]}